import { NavLink } from "react-router-dom";
import LogoBlack from "../../assets/images/DeFaqtoLogoBlack.png";
import "./MobileMenu.css";
import { useState, useEffect  } from 'react';

function MobileMenu(){
    const [isOpen, setIsOpen] = useState(false);

    useEffect(() => {
        document.body.style.overflow = isOpen ? 'hidden' : '';
        
        return () => {
            document.body.style.overflow = '';
        }
    }, [isOpen]);


    return(
        <>
            <button className="burger-menu" onClick={() => setIsOpen(!isOpen)}>
                <svg width="54" height="51" viewBox="0 0 24 21" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M21.7109 17.6846C22.5391 17.6848 23.2108 18.3564 23.2109 19.1846C23.2107 20.0127 22.5391 20.6843 21.7109 20.6846H1.5C0.671788 20.6845 0.000194773 20.0128 0 19.1846C0.000111099 18.3563 0.671736 17.6847 1.5 17.6846H21.7109ZM4.02637 18.5527C3.67763 18.5528 3.39453 18.8358 3.39453 19.1846C3.39461 19.5333 3.67768 19.8163 4.02637 19.8164C4.37513 19.8164 4.65812 19.5333 4.6582 19.1846C4.6582 18.8358 4.37518 18.5527 4.02637 18.5527ZM11.6055 18.5527C11.2567 18.5527 10.9736 18.8358 10.9736 19.1846C10.9737 19.5334 11.2567 19.8164 11.6055 19.8164C11.9542 19.8164 12.2373 19.5333 12.2373 19.1846C12.2373 18.8358 11.9542 18.5528 11.6055 18.5527ZM19.1846 18.5527C18.8358 18.5527 18.5527 18.8358 18.5527 19.1846C18.5528 19.5334 18.8358 19.8164 19.1846 19.8164C19.5333 19.8163 19.8164 19.5333 19.8164 19.1846C19.8164 18.8358 19.5333 18.5529 19.1846 18.5527ZM21.7109 8.8418C22.539 8.84202 23.2107 9.51374 23.2109 10.3418C23.2109 11.1701 22.5392 11.8416 21.7109 11.8418H1.5C0.671667 11.8417 0 11.1702 0 10.3418C0.000277481 9.51367 0.671839 8.84191 1.5 8.8418H21.7109ZM4.02637 9.71094C3.67763 9.71102 3.39453 9.99401 3.39453 10.3428C3.39478 10.6913 3.67778 10.9735 4.02637 10.9736C4.37502 10.9736 4.65795 10.6914 4.6582 10.3428C4.6582 9.99396 4.37518 9.71094 4.02637 9.71094ZM11.6055 9.71094C11.2567 9.71094 10.9736 9.99396 10.9736 10.3428C10.9739 10.6914 11.2568 10.9736 11.6055 10.9736C11.9541 10.9736 12.2371 10.6914 12.2373 10.3428C12.2373 9.99399 11.9542 9.71098 11.6055 9.71094ZM19.1846 9.71094C18.8358 9.71094 18.5527 9.99396 18.5527 10.3428C18.553 10.6914 18.8359 10.9736 19.1846 10.9736C19.5331 10.9735 19.8162 10.6913 19.8164 10.3428C19.8164 9.99404 19.5333 9.71106 19.1846 9.71094ZM21.7109 0C22.5391 0.000222592 23.2108 0.671805 23.2109 1.5C23.2109 2.32829 22.5392 2.99978 21.7109 3H1.5C0.671667 2.99989 0 2.32836 0 1.5C0.000111099 0.671736 0.671736 0.000111099 1.5 0H21.7109ZM4.02637 0.868164C3.6777 0.868247 3.39464 1.15133 3.39453 1.5C3.39453 1.84876 3.67763 2.13175 4.02637 2.13184C4.37518 2.13184 4.6582 1.84881 4.6582 1.5C4.65809 1.15128 4.37511 0.868164 4.02637 0.868164ZM11.6055 0.868164C11.2567 0.868164 10.9737 1.15127 10.9736 1.5C10.9736 1.84881 11.2567 2.13184 11.6055 2.13184C11.9542 2.13179 12.2373 1.84879 12.2373 1.5C12.2372 1.1513 11.9542 0.868206 11.6055 0.868164ZM19.1846 0.868164C18.8358 0.868164 18.5528 1.15127 18.5527 1.5C18.5527 1.84881 18.8358 2.13184 19.1846 2.13184C19.5333 2.13171 19.8164 1.84873 19.8164 1.5C19.8163 1.15135 19.5332 0.868289 19.1846 0.868164Z" fill="#2B2B2B"/>
                </svg>
            </button>
            {isOpen && <div className="menu-overlay" onClick={() => setIsOpen(false)} />}
            <nav className={`mobile-nav ${isOpen ? 'mobile-nav-open' : 'mobile-nav-closed'}`}>
                <div className="mobile-nav-closebtn" onClick={() => setIsOpen(false)}>
                    <svg width="23" height="23" viewBox="0 0 23 23" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M21.5 1.5L1.5 21.5M1.50002 1.5L21.5 21.5" stroke="#2B2B2B" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                </div>
                <div className="logo">
                    <img src={LogoBlack} alt="DeFAQto" style={{ 
                        maxWidth: '220px'
                    }}/>
                </div>
                <ul>
                    <li><NavLink to='/' onClick={() => setIsOpen(false)}>Главная</NavLink></li>
                    <li><NavLink to='/events' onClick={() => setIsOpen(false)}>Афиша</NavLink></li>
                    <li><NavLink to='/menu' onClick={() => setIsOpen(false)}>Меню</NavLink></li>
                    <li><NavLink to='/gallery' onClick={() => setIsOpen(false)}>Галерея</NavLink></li>
                    <li><NavLink to='/contacts' onClick={() => setIsOpen(false)}>Контакты</NavLink></li>
                </ul>
            </nav>
        </>
    )
}

export default MobileMenu;